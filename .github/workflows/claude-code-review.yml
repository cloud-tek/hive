name: claude code review
on:
  pull_request:
    types:
    - opened
    - synchronize
    - reopened
permissions:
  contents: read
  pull-requests: write
  id-token: write
jobs:
  review:
    uses: cloud-tek/poc-claude-review/.github/workflows/claude-code-review.yml@v0.0.1
    with:
      pr_number: ${{ github.event.pull_request.number }}
      base_ref: ${{ github.event.pull_request.base.ref }}
    secrets:
      TOKEN: ${{ secrets.CLOUDTEK_AUTOMATION_TOKEN }}
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
      CLAUDE_CODE_ACTION_APP_ID: ${{ secrets.CLAUDE_CODE_ACTION_APP_ID }}
      CLAUDE_CODE_ACTION_PRIVATE_KEY: ${{ secrets.CLAUDE_CODE_ACTION_PRIVATE_KEY }}
